<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/carrinhocss.css">
	<link rel="icon" type="image/x-icon" href="../img/favicon.png">
	<title> Meu Carrinho de compras</title>
</head>
	<body style="background-color: #f8f4f4;">
	
			
		<div class="conntainer">
			<a href="pesquisa.html"><img src="../img/lupa.png" alt="lupa" class="lupa"></a>
			<a href="perfildousuario.html"><img src="../img/perfil.png" alt="perfil" class="perfil"></a>
			<a href="carrinho.html"><img src="../img/sacola.png" alt="sacola" class="sacola"></a>
		</div>


		<header>
			<div class="navbarsup">
				<a>MORLY'S</a>
			</div>

			<div class="conntainer">
				<a href="pesquisa.html"><img src="../img/lupa.png" alt="lupa" class="lupa"></a>
				<a href="perfildousuario.html"><img src="../img/perfil.png" alt="lupa" class="perfil"></a>
				<a href="carrinho.html"><img src="../img/sacola.png" alt="sacola" class="sacola"></a>
			</div>
			
			<div class="subnavbar">
				<ul>
					<li><a href="perfumes.html">PERFUMES</a></li>
					<li><a href="maquiagens.html">MAQUIAGENS</a></li>
					<li><a href="cabelo&barba.html">CABELO & BARBA</a></li>
					<li><a href="corpo.html">CORPO</a></li>
				</ul>
			</div>
		</header>

		<div id="itens"> </div>
		<div>Total: <span id="total"></span> </div>

		<script>
			var total = 0; // variável que retorna o total dos produtos que estão na LocalStorage.
			var i = 0;     // variável que irá percorrer as posições
			var valor = 0; // variável que irá receber o preço do produto convertido em Float.
	
			// exibe o total dos recheios
			document.getElementById("total").innerHTML = total.toFixed(2);
	
			for (i = 1; i <= 99; i++) {
				var prod = localStorage.getItem("produto" + i);
				if (prod != null) {
					// Cria um elemento de div para cada item do carrinho
					var itemDiv = document.createElement("div");
	
					// Exibe os dados do item dentro da div
					itemDiv.innerHTML += localStorage.getItem("qtd" + i) + " x ";
					itemDiv.innerHTML += localStorage.getItem("produto" + i);
					itemDiv.innerHTML += " ";
					itemDiv.innerHTML += "R$: " + localStorage.getItem("valor" + i);
	
					// Cria um botão de excluir para cada item
					var excluirButton = document.createElement("button");
					excluirButton.innerHTML = "Excluir";
					excluirButton.addEventListener("click", createExcluirItemHandler(i));
	
					// Adiciona o botão de excluir à div do item
					itemDiv.appendChild(excluirButton);
	
					// Adiciona a div do item à div "itens"
					document.getElementById("itens").appendChild(itemDiv);
	
					valor = parseFloat(localStorage.getItem("valor" + i));
					total = total + valor;
				}
			}
			document.getElementById("total").innerHTML = total.toFixed(2);
	
			function createExcluirItemHandler(index) {
				return function() {
					// Lógica para excluir o item do carrinho
					// Pode ser implementada aqui ou chamando uma função externa
	
					// Exemplo de código para remover o item atual do carrinho
					this.parentNode.remove();
	
					// Atualizar o total
					var itemValue = parseFloat(localStorage.getItem("valor" + index));
					total -= itemValue;
					document.getElementById("total").innerHTML = total.toFixed(2);
	
					// Remover o item da localStorage
					localStorage.removeItem("produto" + index);
					localStorage.removeItem("qtd" + index);
					localStorage.removeItem("valor" + index);
				}
			}
		</script>

		<button type="button" onclick=" localStorage.clear(); location.reload();"> Limpar carrinho </button>

		<section>
			
			<div align="right" id="botaofinal"><a href="finalizar.html">FINALIZAR COMPRA</a></div>
			
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			

		</section>
		
		<footer>
			<hr>
			<br>
			<br>
			<br>
			<p align="center">TODOS OS DIREITOS RESERVADOS A MORLY'S</p>
		</footer>

	</body>
</html>